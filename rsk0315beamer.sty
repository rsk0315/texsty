%%!lualatex
%% \documentclass[
%%   lualatex,
%%   ja=standard,
%%   compress,
%%   hyperref={colorlinks, urlcolor=magenta, linkcolor=blue!55!black},
%%   dvipsnames,
%%   svgnames,
%% ]{beamer}


\usepackage{luatexja-preset}

\newcommand{\spoiler}[1]{\rotatebox[origin=c]{180}{\parbox{\textwidth}{#1}}}

\usepackage{luatexja-fontspec}
{\AtBeginDocument{\DeclareMathAlphabet\mathbf{U}{eur}{b}{n}}
\setsansfont[
  Extension = .ttf,
  Ligatures = Rare,
  BoldFont = Junicode-Bold,
  ItalicFont = Junicode-Italic,
  BoldItalicFont = Junicode-BoldItalic,
]{Junicode}

% https://www.overleaf.com/learn/latex/Articles/An_Introduction_to_LuaTeX_(Part_2)%3A_Understanding_%5Cdirectlua#Using_the_tilde_character_.28.7E.29
\begingroup
\catcode`\~=11
\directlua {
  fonts.handlers.otf.addfeature {
    name = "monoalt",
    type = "substitution",
    data = {
      ["0"] = "zero.lf.slashed",
      ["1"] = "one.lf",
      ["2"] = "two.lf",
      ["3"] = "three.lf",
      ["4"] = "four.lf",
      ["5"] = "five.lf",
      ["6"] = "six.lf",
      ["7"] = "seven.lf",
      ["8"] = "eight.lf",
      ["9"] = "nine.lf",
      ["g"] = "g.alt1",
      ["y"] = "y.alt1",
      ["G"] = "G.alt1",
      ["Q"] = "Q.alt",
      ["*"] = "asterisk.alt1",
      ["~"] = "asciitilde.alt1",
    }
  }
}
\endgroup

\setmonofont[
  Extension = .otf,
  UprightFont = TheSansMonoCd-W5Regular,
  BoldFont = TheSansMonoCd-W7Bold,
  ItalicFont = TheSansMonoCd-W5RegularItalic,
  BoldItalicFont = TheSansMonoCd-W7BoldItalic,
]{TheSansMonoCd}[RawFeature=+monoalt]

% \xspcode"5C=3 %% \
% https://ftp.kddilabs.jp/CTAN/macros/luatex/generic/luatexja/doc/luatexja-en.pdf
% pp. 17, 35,
\ltjsetparameter{alxspmode={"22,allow}}  % "
\ltjsetparameter{alxspmode={"24,allow}}  % $
\ltjsetparameter{alxspmode={"25,allow}}  % %
\ltjsetparameter{alxspmode={"2B,allow}}  % +
\ltjsetparameter{alxspmode={"2D,allow}}  % -
\ltjsetparameter{alxspmode={"40,allow}}  % @
\ltjsetparameter{alxspmode={"5B,allow}}  % [
\ltjsetparameter{alxspmode={"5C,allow}}  % \
\ltjsetparameter{alxspmode={"5D,allow}}  % ]
\ltjsetparameter{alxspmode={"5E,allow}}  % ^
%% \ltjsetparameter{alxspmode={"60,allow}}  % `
\ltjsetparameter{alxspmode={"7B,allow}}  % {
\ltjsetparameter{alxspmode={"7C,allow}}  % |
\ltjsetparameter{alxspmode={"7D,allow}}  % }
\ltjsetparameter{alxspmode={"7E,allow}}  % ~
% , の後ろにスペースを入れるとだめみたい

\newcommand\ejspace{\hspace{\ltjgetparameter{xkanjiskip}}}

% https://tex.stackexchange.com/questions/203045/latex-error-option-clash-for-package-hyperref

\usepackage{luatexja-ruby}
\usepackage{lua-ul}

\usepackage{enumitem}
\setlist[itemize]{label=\textbullet, parsep=.5em}
\setlist[enumerate]{label={\small\arabic*.}, parsep=.5em}

\renewcommand{\url}[1]{\href{#1}{\scriptsize\texttt{#1}}}  % & は \& にする必要あり
\newcommand{\urlbreak}[2]{\href{#1#2}{\scriptsize\texttt{#1\\\hspace{1em}#2}}}
\newcommand{\webarchiveurl}[2]{\href{https://web.archive.org/web/#2/#1}{\scriptsize\texttt{#1}\textsuperscript{(web.archive.org:#2)}}}
\newcommand{\webarchiveurlbreak}[3]{\href{https://web.archive.org/web/#3/#1#2}{\scriptsize\texttt{#1\\\hspace{1em}#2}\textsuperscript{(web.archive.org:#3)}}}

\setmainjfont{TsukushiAMaruGothic}[
  Extension = .ttc,
  UprightFeatures = {FontIndex=0},
  BoldFeatures = {FontIndex=1},
]

\usetheme{thomas}
\usefonttheme{professionalfonts}

\newfontfamily\tsukubrd{TsukushiAMaruGothic.ttc}[
  Extension = .ttc,
  UprightFeatures = {FontIndex=0},
  BoldFeatures = {FontIndex=1},
]

\usepackage{lato}
\definecolor{useryellow}{HTML}{C0C000}

\parskip=1em

\newcounter{slidetopic}
\renewcommand{\theslidetopic}{\stepcounter{slidetopic}\Roman{slidetopic}}
\setcounter{slidetopic}{0}

%% \usepackage{atbegshi}
%% \ifnum 42146=\euc"A4A2
%% \AtBeginShipoutFirst{\special{pdf:tounicode EUC-UCS2}}
%% \else
%% \AtBeginShipoutFirst{\special{pdf:tounicode 90ms-RKSJ-UCS2}}
%% \fi

\usepackage{luatexja-preset}

\usepackage{mathpazo}
\usepackage[euler-digits]{eulervm}
\SetSymbolFont{operators}{normal}{T1}{ccr}{m}{n}
\usepackage{euscript}
\usepackage{bm}
